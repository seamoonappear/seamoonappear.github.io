## layout: page

{{ content }}

{% assign posts = paginator.posts | default: site.posts %}

{% for post in posts %}
  {%- capture thumbnail -%}
    {% if post.thumbnail-img %}
      {{ post.thumbnail-img }}
    {% elsif post.cover-img %}
      {% if post.cover-img.first %}
        {{ post.cover-img[0].first.first }}
      {% else %}
        {{ post.cover-img }}
      {% endif %}
    {% endif %}
  {% endcapture %}
  {% assign thumbnail = thumbnail | strip %}

  {% if thumbnail != "" and site.feed_show_excerpt == false %}
    <div class="post-image post-image-normal">
      <a href="{{ post.url | absolute_url }}" aria-label="缩略图">
        <img src="{{ thumbnail | absolute_url }}" alt="文章缩略图">
      </a>
    </div>
  {% endif %}

  <a href="{{ post.url | absolute_url }}">
    <h2 class="post-title">{{ post.title | strip_html }}</h2>
    {% if post.subtitle %}
      <h3 class="post-subtitle">{{ post.subtitle | strip_html }}</h3>
    {% endif %}
  </a>

  {% if post.author %}
    <span>作者：<strong>{{ post.author | strip_html }}</strong></span>
  {% endif %}

  <p class="post-meta">
    {% assign date_format = site.date_format | default: "%Y年%-m月%-d日" %}
    发布于 {{ post.date | date: date_format }}
    {% if site.feed_show_tags != false and post.tags.size > 0 %}
      &nbsp;|&nbsp;
      {% for tag in post.tags %}
        <a href="{{ '/tags' | absolute_url }}#{{- tag -}}" class="post-tag">{{ tag }}</a>{% if forloop.last == false %}, {% endif %}
      {% endfor %}
    {% endif %}
  </p>

  {% if thumbnail != "" %}
    <div class="post-image post-image-small">
      <a href="{{ post.url | absolute_url }}" aria-label="缩略图">
        <img src="{{ thumbnail | absolute_url }}" alt="文章缩略图">
      </a>
    </div>
  {% endif %}

  {% unless site.feed_show_excerpt == false %}
    <div class="post-entry">
      {% assign excerpt_length = site.excerpt_length | default: 50 %}
      {{ post.excerpt | strip_html | truncatewords: excerpt_length }}
      {% assign excerpt_word_count = post.excerpt | number_of_words %}
      {% if post.content != post.excerpt or excerpt_word_count > excerpt_length %}
        <a href="{{ post.url | absolute_url }}" class="post-read-more">[阅读全文]</a>
      {% endif %}
    </div>
  {% endunless %}
{% endfor %}

{% if paginator.total_pages > 1 %}
  <div class="pagination">
    {% if paginator.previous_page %}
      <a href="{{ paginator.previous_page_path | absolute_url }}" class="newer-posts">上一页</a>
    {% endif %}
    {% if paginator.next_page %}
      <a href="{{ paginator.next_page_path | absolute_url }}" class="older-posts">下一页</a>
    {% endif %}
  </div>
{% endif %}